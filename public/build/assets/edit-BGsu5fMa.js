import{r,j as e,H as V,F as w}from"./app-Cw_z5l4U.js";import{I as n}from"./input-error-CzTZ_fZq.js";import{B as f}from"./createLucideIcon-D5stZqwY.js";import{C as B}from"./card-CTqR7mNH.js";import{L as a,I as c}from"./label-BLUIa4h8.js";import{C as o}from"./checkbox-SpVNEXjf.js";import{T as O,a as $,b,c as S,E as z}from"./editor-qhMtW37t.js";import{I as A}from"./image-selector-D3XEQXU1.js";import{A as L}from"./app-layout-uPH7334h.js";/* empty css            */import"./index-DGOKtCD2.js";import"./index-BvZ9Wxko.js";import"./index-C6y8Smka.js";import"./index-uDfcQH3M.js";import"./index-DgqBrDfW.js";import"./dialog-LsCmeSt9.js";import"./x-DqcMwrfX.js";import"./loading-spinner-iY9gaO3p.js";import"./loader-circle-BFk3kFmi.js";import"./send-DlZyaU4k.js";import"./youtube-D_Wi85Lh.js";import"./textarea-CNanSyht.js";import"./separator-CBzbIqmS.js";import"./house-DlMUILPg.js";import"./index-CePVidoA.js";import"./app-logo-icon-3qsCFF9K.js";function oe({post:t,categories:N}){const _=[{title:"Dashboard",href:route("dashboard")},{title:"Bài viết",href:route("admin.posts.index")},{title:"Sửa",href:route("admin.posts.edit",t.id)}],x={root:{children:[{children:[{detail:0,format:0,mode:"normal",style:"",text:"",type:"text",version:1}],direction:"ltr",format:"",indent:0,type:"paragraph",version:1}],direction:"ltr",format:"",indent:0,type:"root",version:1}},[l,m]=r.useState(t.categories.map(d=>String(d.id))),[u,C]=r.useState(()=>{try{return t.content?JSON.parse(t.content):x}catch{return x}}),[j,y]=r.useState(t.is_active),[g,E]=r.useState(t.is_published),[v,I]=r.useState(t.thumbnail?decodeURIComponent(t.thumbnail.replace(/&#37;/g,"%")):""),[h,T]=r.useState(new Set);return e.jsxs(L,{breadcrumbs:_,children:[e.jsx(V,{title:"Sửa bài viết"}),e.jsx("div",{className:"p-4",children:e.jsx(B,{className:"p-6",children:e.jsx(w,{method:"post",action:route("admin.posts.update",t.id),children:({errors:d,processing:F})=>e.jsxs("div",{className:"grid gap-4",children:[e.jsx("input",{type:"hidden",name:"_method",value:"PUT"}),l.map((i,s)=>e.jsx("input",{type:"hidden",name:`category_ids[${s}]`,value:i},s)),e.jsx("input",{type:"hidden",name:"content",value:JSON.stringify(u)}),e.jsx("input",{type:"hidden",name:"is_active",value:j?"1":"0"}),e.jsx("input",{type:"hidden",name:"is_published",value:g?"1":"0"}),e.jsx("input",{type:"hidden",name:"thumbnail",value:v}),e.jsxs(O,{defaultValue:"general",className:"w-full",children:[e.jsxs($,{className:"grid w-full grid-cols-2",children:[e.jsx(b,{value:"general",children:"Thông tin chung"}),e.jsx(b,{value:"seo",children:"Thẻ SEO"})]}),e.jsxs(S,{value:"general",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{htmlFor:"title",children:"Tiêu đề"}),e.jsx(c,{id:"title",name:"title",defaultValue:t.title,required:!0}),e.jsx(n,{message:d.title})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{htmlFor:"slug",children:"Slug"}),e.jsx(c,{id:"slug",name:"slug",defaultValue:t.slug}),e.jsx(n,{message:d.slug})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{children:"Chuyên mục"}),e.jsx("div",{className:"grid gap-2",children:N.map(i=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i.children&&i.children.length>0&&e.jsx(f,{type:"button",variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{const s=new Set(h);s.has(i.id)?s.delete(i.id):s.add(i.id),T(s)},children:h.has(i.id)?"−":"+"}),e.jsx(o,{id:`category_${i.id}`,checked:l.includes(String(i.id)),onCheckedChange:s=>{m(s?[...l,String(i.id)]:l.filter(p=>p!==String(i.id)))}}),e.jsx(a,{htmlFor:`category_${i.id}`,children:i.name})]}),i.children&&i.children.length>0&&h.has(i.id)&&e.jsx("div",{className:"ml-12 space-y-1",children:i.children.map(s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{id:`category_${s.id}`,checked:l.includes(String(s.id)),onCheckedChange:p=>{m(p?[...l,String(s.id)]:l.filter(k=>k!==String(s.id)))}}),e.jsx(a,{htmlFor:`category_${s.id}`,children:s.name})]},s.id))})]},i.id))}),e.jsx(n,{message:d.category_ids})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(A,{value:v,onChange:I,label:"Ảnh đại diện",placeholder:"Chọn ảnh đại diện cho bài viết...",size:"large"}),e.jsx(n,{message:d.thumbnail})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{children:"Nội dung"}),e.jsx(z,{editorSerializedState:u,onSerializedChange:i=>C(i)}),e.jsx(n,{message:d.content})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{htmlFor:"excerpt",children:"Mô tả ngắn"}),e.jsx(c,{id:"excerpt",name:"excerpt",defaultValue:t.excerpt?decodeURIComponent(t.excerpt.replace(/&#37;/g,"%")):""}),e.jsx(n,{message:d.excerpt})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{id:"is_active",checked:j,onCheckedChange:i=>y(!!i)}),e.jsx(a,{htmlFor:"is_active",children:"Kích hoạt"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{id:"is_published",checked:g,onCheckedChange:i=>E(!!i)}),e.jsx(a,{htmlFor:"is_published",children:"Xuất bản"})]})]}),e.jsxs(S,{value:"seo",className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{htmlFor:"seo_title",children:"SEO Title"}),e.jsx(c,{id:"seo_title",name:"seo_title",defaultValue:t.seo_title}),e.jsx(n,{message:d.seo_title})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{htmlFor:"seo_description",children:"SEO Description"}),e.jsx(c,{id:"seo_description",name:"seo_description",defaultValue:t.seo_description}),e.jsx(n,{message:d.seo_description})]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(f,{type:"submit",disabled:F,children:"Cập nhật"})})]})})})})]})}export{oe as default};

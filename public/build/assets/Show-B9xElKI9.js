import{r as w,j as e,L as h}from"./app-ipanO3bs.js";import{B as $}from"./badge-x29PxCHC.js";import{c as T,B as k}from"./createLucideIcon-BjNgcmH3.js";import{M as C,S}from"./MainLayout-C_LQLokV.js";import{H as _}from"./house-JbE_ogcn.js";import{A as q}from"./arrow-right-BUq33578.js";/* empty css            */import"./youtube-tgcJ6Xkw.js";import"./x-BFvKxWSQ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],L=T("Calendar",H);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],B=T("User",M);function I({content:n,className:d=""}){const[x,l]=w.useState("");w.useEffect(()=>{if(!n){l("");return}try{const t=JSON.parse(n);if(t.root&&t.root.children){const c=g(t);l(c)}else l(n)}catch{l(n)}},[n]);const g=t=>!t.root||!t.root.children?"":t.root.children.map(c=>i(c)).join(""),i=t=>{if(!t)return"";switch(t.type){case"paragraph":if(!t.children||t.children.length===0)return"";const c=t.children?.map(s=>i(s)).join("")||"";return c.trim()?`<p>${c}</p>`:"";case"heading":const p=t.tag||"h2",b=t.children?.map(s=>i(s)).join("")||"";return`<${p}>${b}</${p}>`;case"list":const m=t.listType==="number"?"ol":"ul",f=t.children?.map(s=>i(s)).join("")||"";return f.trim()?`<${m}>${f}</${m}>`:"";case"listitem":const j=t.children?.map(s=>i(s)).join("")||"";return j.trim()?`<li>${j}</li>`:"";case"text":if(!t.hasOwnProperty("text")||!t.text)return"";let r=t.text;if(!r.trim())return"";if(r=r.replace(/\\r\\n\\r\\n/g,`

`),r=r.replace(/\\r\\n/g,`
`),r=r.replace(/\\n\\n/g,`

`),r=r.replace(/\\n/g,`
`),t.format!==void 0){const s=t.format;s&1&&(r=`<strong>${r}</strong>`),s&2&&(r=`<em>${r}</em>`),s&4&&(r=`<u>${r}</u>`),s&8&&(r=`<code>${r}</code>`),s&16&&(r=`<del>${r}</del>`),s&32&&(r=`<sub>${r}</sub>`),s&64&&(r=`<sup>${r}</sup>`)}return r;case"link":const a=t.url||"#",u=t.children?.map(s=>i(s)).join("")||"";return`<a href="${a}" target="_blank" rel="noopener noreferrer">${u}</a>`;case"image":const o=t.src||"",v=t.altText||"";return o&&o.trim()?`<img src="${o}" alt="${v}" class="max-w-full h-auto" />`:"";case"quote":return`<blockquote>${t.children?.map(s=>i(s)).join("")||""}</blockquote>`;case"code":return`<pre><code>${t.children?.map(s=>i(s)).join("")||""}</code></pre>`;default:return t.children?t.children.map(s=>i(s)).join(""):""}};return x?e.jsx("div",{className:`prose prose-lg max-w-none ${d}`,dangerouslySetInnerHTML:{__html:x}}):e.jsx("p",{className:"text-gray-500 italic",children:"Nội dung đang được cập nhật..."})}function J({post:n,relatedPosts:d,error:x,menus:l,settings:g,slides:i}){const t=a=>typeof document<"u"?`${(document.querySelector('meta[name="asset-base"]')?.content||"/").replace(/\/$/,"")}/${a.replace(/^\//,"")}`:`/${a.replace(/^\//,"")}`,c=n?.title||"Bài viết",p=n?.excerpt||"",b=n?.content||"",m=n?.thumbnail||"",f=n?.published_at||n?.created_at||new Date().toISOString(),j=n?.categories&&n.categories.length>0?n.categories[0].name:"Tin tức";n?.categories&&n.categories.length>0&&n.categories[0].slug;const r=n?.user?.name||"Admin";return!n||x?e.jsxs(C,{menus:l,settings:g,slides:i,children:[e.jsx(S,{title:"Không tìm thấy bài viết",description:"Không tìm thấy bài viết"}),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:x||"Không tìm thấy bài viết"}),e.jsx(h,{href:route("posts.index"),children:e.jsx(k,{className:"bg-[#27a8e3] hover:bg-[#1f8bc7] text-white",children:"Quay lại danh sách bài viết"})})]})})]}):e.jsxs(C,{menus:l,settings:g,slides:i,children:[e.jsx(S,{title:c,description:p,image:m}),e.jsxs("div",{className:"relative bg-cover bg-center bg-no-repeat py-20 mt-16",style:{backgroundImage:`url('${typeof document<"u"&&document.querySelector('meta[name="asset-base"]')?.content||"/"}banner-bg-2.png')`},children:[e.jsx("div",{className:"absolute inset-0 bg-black/30"}),e.jsx("div",{className:"relative z-10 container mx-auto px-4",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4 text-sm",children:[e.jsxs(h,{href:"/",className:"flex items-center hover:text-[#27a8e3] transition-colors",children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),"Trang chủ"]}),e.jsx("span",{children:"/"}),e.jsx(h,{href:route("posts.index"),className:"hover:text-[#27a8e3] transition-colors",children:"Tin tức"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-[#27a8e3]",children:c})]}),e.jsx($,{variant:"secondary",className:"mb-4 bg-white/20 text-white border-white/30",children:j}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 leading-tight",children:c}),e.jsxs("div",{className:"flex items-center justify-center space-x-6 text-white/80",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),new Date(f).toLocaleDateString("vi-VN")]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),r]})]})]})})]}),e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[m&&e.jsx("div",{className:"h-96 overflow-hidden",children:e.jsx("img",{src:m,alt:c,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"p-8",children:e.jsx(I,{content:b})})]})}),e.jsxs("div",{className:"lg:col-span-1",children:[d&&d.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Bài viết liên quan"}),e.jsx("div",{className:"space-y-4",children:d.map(a=>{const u=a.title||"Bài viết liên quan",o=a.slug||"",v=a.thumbnail||"",N=a.categories&&a.categories.length>0?a.categories[0].name:"Tin tức",y=a.published_at||a.created_at||new Date().toISOString();return e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"w-20 h-16 flex-shrink-0 overflow-hidden rounded",children:e.jsx(h,{href:route("posts.show",o),children:e.jsx("img",{src:v?decodeURIComponent(v.replace(/&#37;/g,"%")):t("placeholder.jpg"),alt:u,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110 cursor-pointer",onError:s=>{s.currentTarget.src=t("placeholder.jpg")}})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx($,{variant:"secondary",className:"mb-1 text-xs",children:N}),e.jsx("h4",{className:"text-sm font-semibold line-clamp-2 mb-1",children:e.jsx(h,{href:route("posts.show",o),className:"hover:text-[#27a8e3] transition-colors",children:u})}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(y).toLocaleDateString("vi-VN")})]})]},a.id||Math.random())})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsx(h,{href:route("posts.index"),children:e.jsxs(k,{className:"w-full bg-[#27a8e3] hover:bg-[#1f8bc7] text-white",children:["Xem tất cả bài viết",e.jsx(q,{className:"ml-2 h-4 w-4"})]})})})]})]})})]})}export{J as default};
